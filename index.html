<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Fuck SESTA - A one page site to save a copy of your personal website.</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/creative.min.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">Fuck SESTA</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#download">Download</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#howto">How To</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#disclaimer">Disclaimer</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <header class="masthead text-center text-white d-flex">
      <div class="container my-auto">
        <div class="row">
          <div class="col-lg-10 mx-auto">
            <h1 class="text-uppercase">
              <strong>Fuck SESTA/FOSTA</strong>
            </h1>
            <hr>
          </div>
          <div class="col-lg-8 mx-auto">
            <p class="text-faded mb-5">
              Since passing in both the House and the Senate, the SESTA-FOSTA bill has endangered the lives of U.S.-based sex workers, resulting in seizures and shutdowns of the sites we rely on for advertising, safety, and community.  While the consequences of this bill are still somewhat unknown, many of us are concerned that our work websites may be deleted or otherwise impacted.
            </p>
            <p class="text-faded mb-5">
              This site was designed to allow U.S.-based sex workers to easily download and save their work websites as a precautionary measure during this time of uncertainty.
            </p>
            <a class="btn btn-primary btn-xl js-scroll-trigger" href="#about">How It works</a>
          </div>
        </div>
      </div>
    </header>

    <section class="bg-primary" id="download" name="download">

      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h2 class="section-heading text-white">Download Your Site</h2>
            <hr class="light my-4">
            <p class="text-faded mb-4">
              Simply copy and paste your website URL into the field below and click "Go."  Your website (including pages, pictures, copy, and formatting) will be made into a ZIP file that you can then download and use to easily re-host your site.  Keep in mind, this tool may only be used while your site is still publicly available, so act today.
            </p>
          </div>
        </div>

        <form id="requestform" class="form-group row align-items-center">
          <div class="col-sm-8 mx-auto text-center ">
            <input type="text" class="form-control form-control-lg" name="website" id='website'>
          </div>
          <div class="col-sm-4 mx-auto text-center">
            <button type="submit" class="btn btn-light btn-xl" href="#download">Go</a>
          </div>
        </form>
        <br>

        <div class="row">
          <div class="col-lg-8 mx-auto text-center" id='result'>
          </div>
        </div>
      </div>
    </section>

    <section id="howto" name="howto">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center">
            <h2 class="section-heading">How to Unzip and Use Your Files</h2>
            <hr class="my-4">
            <p>
              Once your ZIP file is ready for download, click the link provided to download it to your device.  This link will only work for the next 24 hours.  
            </p>
            <p>
              Once you have downloaded your ZIP file, simply double click on it to unzip your files.  Your device will create a new folder with all of your website documents inside.  These files and their names will vary depending on which platform you used to create your site, so take a moment to open each file and to familiarize yourself with the folder structure.  This will also give you the opportunity to ensure that all of your files downloaded properly.  
            </p>
            <p>
              Now that you have a copy of your site saved, you have two options.  If you're not super tech-savvy, you can share these files with a Web Developer to upload them for you.  Or, if you'd like to upload the site yourself, you can upload the entire folder to a static hosting service. This website, for instance, is hosted on Amazon S3; however, you could also use another free hosting provider such as Github Pages, Google Firebase, or Ovobox.  For a more comprehensive list of simple static hosting providers <a href="https://www.slant.co/topics/2256/~static-website-hosting-provider">click here</a>
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="disclaimer" name="disclaimer" class="bg-dark text-white">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h2 class="section-heading">DISCLAIMER</h2>
            <hr class="my-4">
            <p class="mb-5">
              This site will not track you or anything about your website. The website URLs entered here are converted to a semi-random string of characters, which is the only way to identify your website. No logs are kept of the IP addresses used to access this site or its functionality. In other words, anyone can use this site to download any website in its entirety.*
            </p>
            <p>
              This site cannot be used to download backend code from sites that run their own backend.  Only what is publicly available can be cloned. Likewise, sites that use Wordpress, Squarespace, or another custom website builder will be able to save all of their current site documents, but will lose the functionality provided by those platforms. At this time, we cannot guarantee that downloads will include functional analytics code, forms, and ads. 
            </p>
            <p>
              This website takes no responsibility for the functionality of your site after you download. There are too many ways to build a website and we can only cover what is publicly available. 
            </p>
            <p>
              *The top 100,000 Alexa-ranked sites in the world are excluded from this site's service.
            </p>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-4 ml-auto text-center">
            <i class="fa fa-phone fa-3x mb-3 sr-contact"></i>
            <p>123-456-6789</p>
          </div>
          <div class="col-lg-4 mr-auto text-center">
            <i class="fa fa-envelope-o fa-3x mb-3 sr-contact"></i>
            <p>
              <a href="mailto:your-email@your-domain.com">feedback@startbootstrap.com</a>
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="vendor/scrollreveal/scrollreveal.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/creative.min.js"></script>

    <script>
      function time(s) {
        return new Date(s * 1e3).toISOString().slice(-13, -5);
      }

      var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
          sParameterName = sURLVariables[i].split('=');

          if (sParameterName[0] === sParam) {
              return sParameterName[1] === undefined ? true : sParameterName[1];
          }
        }
      };

      function getSite(site){
        $.get( "http://ec2-54-210-30-49.compute-1.amazonaws.com:5000/getSite", {site: site}).done(function( data ) {
          // $("#result" ).html( data );
          console.log( "Load was performed." );
          console.log(data);
          html = '<h3 class="text-black">'+site+'</h3>'
          if(data.start != undefined){
            html += '<div>Download is Queued...</div>';
            html += '<div>Refresh this page for updates.</div>';
          }
          if( data.end === undefined || data.end < data.start ){
            html += '<div>Copy initiated at'+Date(data.start*1000)+'</div>';
            html += '<div>Currently downloading...</div>';
          }
          if(data.s3url !== null){
            html += '<div>Last copied at '+new Date(data.end*1000)+'</div>';
            html += '<div>This link is good until '+ new Date((data.end+86400)*1000)+'</div>';
            // html += '<div>Processing took '+time(data.time)+'</div>';
            html += '<a class="btn btn-light btn-xl" href="'+data.s3url+'">Download</a>';
          }
          if(data.error){
            html+= '<div class="error">'+data.message+'</div>';
          }
          $('#result').html(html)
        });
      }

      function requestSite(site){
        $.get( "http://ec2-54-210-30-49.compute-1.amazonaws.com:5000/requestSite", {site: site}).done(function(data){
          console.log(data)
          var url = location.protocol + '//' + location.host + location.pathname
          window.location.href = url +"?site="+site+"#download"
        });

      }
      $( document ).ready(function() {
          console.log( "ready!" );
          var site = getUrlParameter('site');
          console.log(site);
          if(site != undefined){
            $('#website').val(site)
            getSite(site);
          }
          $('#requestform').submit(function( event ) {
            console.log( "Form Submitted" );
            event.preventDefault();
            requestSite($('#website').val())
          });

      });
    </script>

  </body>

</html>
